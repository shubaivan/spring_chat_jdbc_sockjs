stages:
#  - test
  - build
  - deploy

#junit:
#  stage: test
#  script:
#    - ./gradlew test

build:
  stage: build
  only:
    - dev
    - master
  script:
    - chmod +x gradlew
    - ./gradlew bootJar
  artifacts:
    paths:
      - -ls -l
      - .spd_talks.jar

deploy develop:
  stage: deploy
  only:
    - dev
  dependencies:
    - build
  script:
    - mv .spd_talks.jar /opt/app/
    - cd /opt/app
    - sudo ./restart.sh &